@model DalaWeb.Domain.Entities.Abonents.Abonent

@{
    ViewBag.Title = "Редактирование";
}

<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>

<table>
    <tr>
        <td>
            <h3>Информационная страница абонента @Model.Name</h3>
        </td>
        <td class="text-center">
            @Html.Partial("Balance", Model.Payments)
        </td>
    </tr>
</table>
<table>
    <tr>
        <td>
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)
                <table class="table table-hover">
                    <caption>
                        <h3>
                            Общая информация
                        </h3>
                    </caption>
                    @Html.HiddenFor(model => model.AbonentId)
                    <tr>
                        <td>
                            <div class="editor-label">
                                @Html.LabelFor(model => model.Name)
                            </div>
                        </td>
                        <td>
                            <div class="editor-field">
                                @Html.EditorFor(model => model.Name)
                                @Html.ValidationMessageFor(model => model.Name)
                            </div>
                        </td>
                        <td>
                            <div class="editor-label">
                                @Html.LabelFor(model => model.INN)
                            </div>
                        </td>
                        <td>
                            <div class="editor-field">
                                @Html.EditorFor(model => model.INN)
                                @Html.ValidationMessageFor(model => model.INN)
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="editor-label">
                                @Html.LabelFor(model => model.AbonentNumber)
                            </div>
                        </td>
                        <td align="center">
                            @if (!String.IsNullOrEmpty(Model.AbonentNumber))
                {
                            <div class="editor-field">
                                @Html.HiddenFor(model => model.AbonentNumber)
                                @Html.EditorFor(model => model.AbonentNumber, new { disabled = "disabled" })
                            </div>
                }
                else
                {
                            <span style="font-size: 16px; align-content: center" class="label label-info">Добавьте адрес</span>
                }
                        </td>
                        <td>
                            <div class="editor-label">
                                @Html.LabelFor(model => model.NumberOfInhabitants)
                            </div>
                        </td>
                        <td>
                            <div class="editor-field">
                                @Html.EditorFor(model => model.NumberOfInhabitants)
                                @Html.ValidationMessageFor(model => model.NumberOfInhabitants)
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="editor-label">
                                @Html.LabelFor(model => model.Telephone)
                            </div>
                        </td>
                        <td>
                            <div class="editor-field">
                                @Html.EditorFor(model => model.Telephone)
                                @Html.ValidationMessageFor(model => model.Telephone)
                            </div>
                        </td>
                        <td>
                            <div class="editor-label">
                                Адрес
                            </div>
                        </td>
                        @if (Model.Address != null)
                        {
                            <td>
                                @Html.ActionLink(Model.Address.City.Name + " " +
                                                 Model.Address.Street.Name + " " +
                                                 Model.Address.House, "Edit", "Address", 
                                                 new { abonentId = Model.AbonentId }, null)
                            </td>
                        }
                        else
                        {
                            <td>
                                @Html.ActionLink("Добавить адрес", "Create", "Address", 
                                                new { abonentId = Model.AbonentId }, null)
                            </td>
                        }
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            <input type="submit" value="Сохранить" class="btn" />
                        </td>
                    </tr>
                </table>
            }
        </td>
        <td>
           
        </td>
    </tr>
</table>

@Html.Partial("AbonentServices", Model)
@Html.Partial("AbonentCredits", Model)

<div>
    @Html.ActionLink("Вернуться", "Index")
</div>
